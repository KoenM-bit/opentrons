---
test_name:  Test enable/disable OEM Mode
marks:
  - usefixtures:
    - run_server
stages:
  - name: PUT first request
    request: &enable_oem_mode_first
      url: "{host:s}:{port:d}/system/oem_mode/enable"
      json:
        enable: true
      method: PUT
      headers:
        content-type: application/json
    response:
      status_code: 200
  - name: PUT second request
    request: &enable_oem_mode_second
      url: "{host:s}:{port:d}/system/oem_mode/enable"
      json:
        enable: false
      method: PUT
      headers:
        content-type: application/json
    response:
      status_code: 200
  - name: PUT third request
    request: &enable_oem_mode_third
      url: "{host:s}:{port:d}/system/oem_mode/enable"
      json:
        wrong_key: false
      method: PUT
      headers:
        content-type: application/json
    response:
      status_code: 422
---
test_name: Upload, and validate an image for OEM Mode

marks:
  - usefixtures:
      - run_server
stages:
  - name: Upload PNG Image
    request: &upload_splash_first
      url: "{host:s}:{port:d}/system/oem_mode/upload_splash"
      method: POST
      files:
        files: 'tests/integration/resources/oem_mode_custom.png'
    response:
      save:
        json:
          protocol_id: data.id
          analysis_id: data.analysisSummaries[0].id
      status_code: 201
      json:
        data:
          id: !anystr
          protocolType: python

